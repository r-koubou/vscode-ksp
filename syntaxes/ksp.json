{
    "scopeName": "source.kontakt.ksp.rkoubou",
    "name": "KSP",
    "comment": "NI Kontakt Script syntax",
    "fileTypes": [
        "ksp",
        "txt"
    ],
    "patterns": [
        {
            "include": "#comment"
        },
        {
            "include": "#numerics_literal"
        },
        {
            "include": "#ksp_string_literal"
        },
        {
            "include": "#ksp_keyword"
        },
        {
            "include": "#ksp_operator"
        },
        {
            "include": "#ksp_variable"
        }
    ],
    "repository": {
        "comment": {
            "patterns": [
                {
                    "name": "comment.ksp",
                    "begin": "{",
                    "end": "}"
                }
            ]
        },
        "numerics_literal": {
            "patterns": [
                {
                    "name": "constant.numeric.ksp",
                    "match": "(0|[1-9][0-9]*)\\b"
                },
                {
                    "name": "constant.numeric.ksp",
                    "match": "(9[0-9|a-f|A-F]+h)\\b"
                },
                {
                    "name": "constant.numeric.ksp",
                    "match": "(\\.[0-9]+)\\b"
                }
            ]
        },
        "ksp_string_literal": {
            "patterns": [
                {
                    "name": "string.quoted.double.ksp",
                    "begin": "\"",
                    "end": "\""
                },
                {
                    "name": "character.escape.ksp",
                    "match": "\\\\."
                }
            ]
        },
        "ksp_keyword": {
            "patterns": [
                {
                    "name": "variable.other.readwrite.ksp",
                    "match": "(\\$|\\~|\\?|@|!|%)([0-9|a-z|A-Z|_]+)"
                },
                {
                    "name": "keyword.block.ksp",
                    "match": "\\b(on|end|function)\\b"
                },
                {
                    "name": "keyword.declaration.ksp",
                    "match": "\\b(declare|const|polyphonic)\\b"
                },
                {
                    "name": "keyword.control.ksp",
                    "match": "\\b(if|else|while|select|continue|call|exit)\\b"
                }
            ]
        },
        "ksp_operator": {
            "patterns": [
                {
                    "name": "keyword.other.operator.arithmeticop.ksp",
                    "match": "\\b(mod)\\b"
                },
                {
                    "name": "keyword.other.operator.bool.ksp",
                    "match": "\\b(and|or|not)\\b"
                },
                {
                    "name": "keyword.other.operator.bit.ksp",
                    "match": "\\b(\\.and\\.|\\.or\\.|\\.not\\.)\\b"
                }
            ]
        }
    }
}